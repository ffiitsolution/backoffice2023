<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.20.6.final using JasperReports Library version 6.20.6-5c96b6aa8a39ac1dc6b6bea4b81168e16dd39231  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="reportActualStockOpname" pageWidth="595" pageHeight="840" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="341841ad-479a-4fd4-b008-afc4dd840486">
	<property name="ireport.zoom" value="1.610510000000015"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="Localhost"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<parameter name="outletCode" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="fromDate" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="toDate" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="outletBrand" class="java.lang.String"/>
	<parameter name="user" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT Q.*, mo.outlet_name, mo.ADDRESS_1, mo.ADDRESS_2, mo.PHONE,
ROUND((Q.TOT_UCOST / Q.GRAND_TOT_UCOST * 100), 2) AS PERCENT,
ROUND(Q.GRAND_TOT_UCOST / Q.TOTAL_SALES * 100, 
3) AS summary_persen
FROM (
  SELECT
    p.OUTLET_CODE,
    p.ITEM_CODE,
    p.ITEM_DESCRIPTION,
    p.STOCK_QTY,
    p.UOM_STOCK,
    p.ITEM_COST,
    p.TOT_UCOST,
    p.GRAND_TOT_UCOST,
    p.TOTAL_SALES
  FROM (
    SELECT
      A.OUTLET_CODE,
      A.ITEM_CODE,
      B.ITEM_DESCRIPTION,
      SUM(A.QTY_BEGINNING + A.QTY_IN - QTY_OUT) AS STOCK_QTY,
      B.UOM_STOCK,
      C.ITEM_COST,
      ROUND(SUM((A.QTY_BEGINNING + A.QTY_IN - A.QTY_OUT) * C.ITEM_COST), 3) AS TOT_UCOST,
      (
        SELECT ROUND(SUM((A.QTY_BEGINNING + A.QTY_IN - A.QTY_OUT) * C.ITEM_COST), 3)
        FROM T_STOCK_CARD A
        JOIN M_ITEM B ON A.ITEM_CODE = B.ITEM_CODE AND A.OUTLET_CODE = $P{outletCode}
          AND A.TRANS_DATE BETWEEN $P{fromDate} AND $P{toDate}
          AND A.REMARK LIKE 'SOP-%'
        JOIN M_ITEM_COST C ON C.ITEM_CODE = A.ITEM_CODE AND C.OUTLET_CODE = A.OUTLET_CODE
      ) AS GRAND_TOT_UCOST,
      (
        SELECT SUM(TOTAL_AMOUNT) FROM T_POS_BILL
        WHERE OUTLET_CODE=$P{outletCode} AND TRANS_DATE BETWEEN $P{fromDate} AND $P{toDate} AND DELIVERY_STATUS='CLS'
      ) AS TOTAL_SALES
    FROM T_STOCK_CARD A
    JOIN M_ITEM B ON A.ITEM_CODE = B.ITEM_CODE AND A.OUTLET_CODE = $P{outletCode}
      AND A.TRANS_DATE BETWEEN $P{fromDate} AND $P{toDate}
      AND A.REMARK LIKE 'SOP-%'
    JOIN M_ITEM_COST C ON C.ITEM_CODE = A.ITEM_CODE AND C.OUTLET_CODE = A.OUTLET_CODE
    GROUP BY A.OUTLET_CODE,
      A.ITEM_CODE,
      B.ITEM_DESCRIPTION,
      B.UOM_STOCK,
      C.ITEM_COST
    ORDER BY A.OUTLET_CODE, A.ITEM_CODE, B.ITEM_DESCRIPTION
  ) P
  WHERE p.TOT_UCOST > 0
  GROUP BY P.OUTLET_CODE,
    P.ITEM_CODE,
    P.ITEM_DESCRIPTION,
    P.STOCK_QTY,
    P.UOM_STOCK,
    P.ITEM_COST,
    P.TOT_UCOST,
    P.TOTAL_SALES,
    P.GRAND_TOT_UCOST
) Q 
JOIN M_OUTLET mo ON mo.outlet_code =  $P{outletCode} 
ORDER BY Q.ITEM_CODE]]>
	</queryString>
	<field name="OUTLET_CODE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="OUTLET_CODE"/>
		<property name="com.jaspersoft.studio.field.label" value="OUTLET_CODE"/>
	</field>
	<field name="ITEM_CODE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="ITEM_CODE"/>
		<property name="com.jaspersoft.studio.field.label" value="ITEM_CODE"/>
	</field>
	<field name="ITEM_DESCRIPTION" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="ITEM_DESCRIPTION"/>
		<property name="com.jaspersoft.studio.field.label" value="ITEM_DESCRIPTION"/>
	</field>
	<field name="STOCK_QTY" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="STOCK_QTY"/>
		<property name="com.jaspersoft.studio.field.label" value="STOCK_QTY"/>
	</field>
	<field name="UOM_STOCK" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="UOM_STOCK"/>
		<property name="com.jaspersoft.studio.field.label" value="UOM_STOCK"/>
	</field>
	<field name="ITEM_COST" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="ITEM_COST"/>
		<property name="com.jaspersoft.studio.field.label" value="ITEM_COST"/>
	</field>
	<field name="TOT_UCOST" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="TOT_UCOST"/>
		<property name="com.jaspersoft.studio.field.label" value="TOT_UCOST"/>
	</field>
	<field name="GRAND_TOT_UCOST" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="GRAND_TOT_UCOST"/>
		<property name="com.jaspersoft.studio.field.label" value="GRAND_TOT_UCOST"/>
	</field>
	<field name="TOTAL_SALES" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="TOTAL_SALES"/>
		<property name="com.jaspersoft.studio.field.label" value="TOTAL_SALES"/>
	</field>
	<field name="OUTLET_NAME" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="OUTLET_NAME"/>
		<property name="com.jaspersoft.studio.field.label" value="OUTLET_NAME"/>
	</field>
	<field name="ADDRESS_1" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="ADDRESS_1"/>
		<property name="com.jaspersoft.studio.field.label" value="ADDRESS_1"/>
	</field>
	<field name="ADDRESS_2" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="ADDRESS_2"/>
		<property name="com.jaspersoft.studio.field.label" value="ADDRESS_2"/>
	</field>
	<field name="PHONE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="PHONE"/>
		<property name="com.jaspersoft.studio.field.label" value="PHONE"/>
	</field>
	<field name="PERCENT" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="PERCENT"/>
		<property name="com.jaspersoft.studio.field.label" value="PERCENT"/>
	</field>
	<field name="SUMMARY_PERSEN" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="SUMMARY_PERSEN"/>
		<property name="com.jaspersoft.studio.field.label" value="SUMMARY_PERSEN"/>
	</field>
	<variable name="total_persen" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{PERCENT}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="118" splitType="Stretch">
			<line>
				<reportElement x="0" y="98" width="555" height="1" uuid="646b9ea6-8fe0-4179-9481-1bd831cd8f04"/>
			</line>
			<line>
				<reportElement x="0" y="117" width="555" height="1" uuid="9b4d6d14-cf2e-439c-b05a-8d96be9a55db"/>
			</line>
			<staticText>
				<reportElement x="0" y="99" width="44" height="18" uuid="2ca99acf-c14d-4fc0-a86f-93d01961953c"/>
				<textElement verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Code]]></text>
			</staticText>
			<staticText>
				<reportElement x="44" y="99" width="186" height="18" uuid="9324eae0-eb3a-4cec-80fe-05b194865441"/>
				<textElement verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Outlet Name]]></text>
			</staticText>
			<staticText>
				<reportElement x="229" y="99" width="80" height="18" uuid="a1d7f151-0761-47c1-83da-1f9dff65c070">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Total Quantity]]></text>
			</staticText>
			<staticText>
				<reportElement x="312" y="99" width="32" height="18" uuid="10e8d854-2e49-4cb8-924a-6416547dc2bc"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[UOM]]></text>
			</staticText>
			<staticText>
				<reportElement x="344" y="99" width="58" height="18" uuid="e8126b50-83b9-4fd0-97a3-c108991637e2"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Unit Cost]]></text>
			</staticText>
			<staticText>
				<reportElement x="402" y="99" width="92" height="18" uuid="2652d4b8-9ef8-4b2d-934d-eeaeafa5cb35"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Total Unit Cost]]></text>
			</staticText>
			<staticText>
				<reportElement x="494" y="99" width="61" height="18" uuid="d6099b12-d73e-44e1-8f6b-975e37918901"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[%]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="57" width="555" height="18" uuid="054637d1-cf41-4251-aceb-8cd4520c2bc6"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[REPORT ACTUAL STOCK OPNAME]]></text>
			</staticText>
			<textField>
				<reportElement x="64" y="11" width="165" height="11" uuid="d49f8a33-7c2d-4bd9-8a0c-a3da0cdb2399"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{OUTLET_NAME}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="64" y="21" width="165" height="11" uuid="1d413335-f769-4619-9d46-990fa2821fd7"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ADDRESS_1}]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="7" y="0" width="56" height="42" isPrintWhenDetailOverflows="true" uuid="a74f4b64-21cf-43c4-b134-dc4525922b36"/>
				<imageExpression><![CDATA["logo/logoKfc.png"]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="64" y="0" width="112" height="11" uuid="b6175580-26b7-4d24-a0da-c1a98b446e71"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[PT. Fastfood Indonesia, Tbk]]></text>
			</staticText>
			<textField textAdjust="StretchHeight">
				<reportElement x="0" y="80" width="229" height="13" uuid="2dd056d2-fcc5-4330-98c4-54bee8799ca3"/>
				<textElement>
					<font size="9" isUnderline="false"/>
				</textElement>
				<textFieldExpression><![CDATA[" Date From : " + new SimpleDateFormat("dd/MM/yyyy").format(new SimpleDateFormat("dd-MMM-yy").parse($P{fromDate})) + " To " + new SimpleDateFormat("dd/MM/yyyy").format(new SimpleDateFormat("dd-MMM-yy").parse($P{toDate}))]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="64" y="32" width="165" height="11" uuid="be9e687d-8e59-4f84-a5c2-b833dcc77846"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ADDRESS_2}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="64" y="43" width="165" height="11" uuid="d62d49c9-ba74-42b4-afd4-0db3d9ef3645"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PHONE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="440" y="1" width="114" height="11" uuid="ade3e8fa-5d06-4873-854a-4c7aade9aba4"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Halaman : " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="440" y="11" width="114" height="11" uuid="dc673e4f-a000-4e39-b819-4e1304db88ef"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["User Cetak : " + $P{user}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="440" y="21" width="114" height="11" uuid="394002ff-dd41-4e5b-bc33-68244b244aa9"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Tanggal Cetak : " + new SimpleDateFormat("dd/MM/yyyy").format(new Date())]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="440" y="31" width="114" height="11" uuid="a06924fc-41fd-4b41-9552-f25ef85b0314"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Jam Cetak : " + new SimpleDateFormat("hh:mm:ss").format(new Date())]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="14" splitType="Stretch">
			<textField>
				<reportElement x="0" y="-1" width="46" height="14" uuid="18e5c05c-88e4-4989-bb20-b3853c4ae32a"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ITEM_CODE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="46" y="-1" width="184" height="14" uuid="de5ce1e6-b238-47b5-8de1-b9de8c29bf5c"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ITEM_DESCRIPTION}]]></textFieldExpression>
			</textField>
			<textField pattern="#,###.###;#,###.###-">
				<reportElement x="230" y="-1" width="80" height="14" uuid="bd751e55-be43-4bba-8119-cc1a3a9ad6f7">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{STOCK_QTY}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="312" y="-1" width="32" height="14" uuid="caba4ab2-1ac8-485e-9864-104a3ffc5afc"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{UOM_STOCK}]]></textFieldExpression>
			</textField>
			<textField pattern="#,###.###;#,###.###-">
				<reportElement x="344" y="0" width="58" height="14" uuid="469ba032-f8a6-4a5f-a8a0-3d519f0a3676"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ITEM_COST}]]></textFieldExpression>
			</textField>
			<textField pattern="#,###.###;#,###.###-">
				<reportElement x="402" y="0" width="92" height="14" uuid="6fa9a5d6-eacd-4211-97e2-19d99dc86967"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{TOT_UCOST}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="494" y="0" width="60" height="14" uuid="3e2ccfa1-a6b5-4a8a-8ce0-b30307152ca2"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PERCENT}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="77" splitType="Stretch">
			<staticText>
				<reportElement x="347" y="12" width="42" height="15" uuid="00df59e5-def2-4916-80c2-34e2c6dafdf1"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<text><![CDATA[TOTAL :]]></text>
			</staticText>
			<staticText>
				<reportElement x="299" y="27" width="90" height="15" uuid="299db8e9-faba-4cc0-a93e-51d1d5b3fb5d"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<text><![CDATA[TOTAL NET SALES :]]></text>
			</staticText>
			<staticText>
				<reportElement x="299" y="42" width="90" height="15" uuid="3c6f62f4-c512-481e-b171-e7ec352e8b3d"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<text><![CDATA[% :]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="5" width="555" height="1" uuid="85478894-6f62-452a-aa12-5d9347d31547"/>
			</line>
			<textField pattern="#,###.###;#,###.###-">
				<reportElement x="394" y="27" width="100" height="14" uuid="ed14a587-7907-483a-a487-dbe7a7ae5eed"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{TOTAL_SALES}]]></textFieldExpression>
			</textField>
			<textField pattern="#,###.###;#,###.###-">
				<reportElement x="394" y="13" width="100" height="14" uuid="1afd7213-2246-4815-83d8-370153b41142"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GRAND_TOT_UCOST}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="494" y="12" width="60" height="14" uuid="77b6dfbc-0ed1-4b4a-97fb-86c2ea844c28"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{total_persen}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="394" y="42" width="100" height="14" uuid="7782dbd2-1ed3-453b-bf23-b594587f9e76"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SUMMARY_PERSEN}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="60" width="555" height="1" uuid="fa507b6b-175d-4bab-9d13-ddcdd8c97963"/>
			</line>
			<staticText>
				<reportElement mode="Transparent" x="448" y="62" width="106" height="15" uuid="1c449df3-c025-4b12-af3b-c35607cb5bfe">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="10" isBold="true" isItalic="true"/>
				</textElement>
				<text><![CDATA[-- End Of Report --]]></text>
			</staticText>
		</band>
	</summary>
</jasperReport>
