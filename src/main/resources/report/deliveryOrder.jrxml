<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="deliveryOrder" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="1356944a-c454-4393-99ee-8392e8ce3866">
    <property name="ireport.zoom" value="1.5"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="city" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="outletCode" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="fromDate" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="toDate" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="user" class="java.lang.String"/>
    <parameter name="detail" class="java.lang.Integer"/>
    <queryString>
        <![CDATA[SELECT DENSE_RANK() over(ORDER BY a.DELIVERY_NO) AS num, a.DELIVERY_NO, a.REQUEST_NO, CONCAT(b.OUTLET_NAME,
CONCAT(c.SUPPLIER_NAME, d.DESCRIPTION)) AS delivery_order_ke, a.REMARK,
CASE WHEN a.STATUS = '0' THEN 'Open' WHEN a.STATUS = '1' THEN 'Close' ELSE 'Cancel' END AS STATUS,
e.ITEM_CODE, f.ITEM_DESCRIPTION, e.QTY_PURCH, e.UOM_PURCH, e.QTY_STOCK, e.UOM_STOCK, e.TOTAL_QTY, f.UOM_STOCK as uom_total, a.DELIVERY_DATE,
g.OUTLET_NAME, g."TYPE", g.ADDRESS_1, g.ADDRESS_2
FROM T_DEV_HEADER a
LEFT JOIN M_OUTLET b ON a.OUTLET_TO = b.OUTLET_CODE
LEFT JOIN M_SUPPLIER c ON a.OUTLET_TO = c.CD_SUPPLIER
LEFT JOIN M_GLOBAL d ON a.OUTLET_TO  = d.CODE AND d.COND =$P{city}
LEFT JOIN T_DEV_DETAIL e ON a.REQUEST_NO = e.REQUEST_NO
LEFT JOIN M_ITEM f ON e.ITEM_CODE = f.ITEM_CODE
JOIN M_OUTLET g ON a.OUTLET_CODE = g.OUTLET_CODE
WHERE a.OUTLET_CODE =$P{outletCode} AND a.DELIVERY_DATE BETWEEN $P{fromDate} AND $P{toDate} ORDER BY a.DELIVERY_DATE, a.DELIVERY_NO  ASC]]>
    </queryString>
    <field name="NUM" class="java.math.BigDecimal"/>
    <field name="DELIVERY_NO" class="java.lang.String"/>
    <field name="REQUEST_NO" class="java.lang.String"/>
    <field name="DELIVERY_ORDER_KE" class="java.lang.String"/>
    <field name="REMARK" class="java.lang.String"/>
    <field name="STATUS" class="java.lang.String"/>
    <field name="ITEM_CODE" class="java.lang.String"/>
    <field name="ITEM_DESCRIPTION" class="java.lang.String"/>
    <field name="QTY_PURCH" class="java.math.BigDecimal"/>
    <field name="UOM_PURCH" class="java.lang.String"/>
    <field name="QTY_STOCK" class="java.math.BigDecimal"/>
    <field name="UOM_STOCK" class="java.lang.String"/>
    <field name="TOTAL_QTY" class="java.math.BigDecimal"/>
    <field name="UOM_TOTAL" class="java.lang.String"/>
    <field name="DELIVERY_DATE" class="java.sql.Timestamp"/>
    <field name="OUTLET_NAME" class="java.lang.String"/>
    <field name="TYPE" class="java.lang.String"/>
    <field name="ADDRESS_1" class="java.lang.String"/>
    <field name="ADDRESS_2" class="java.lang.String"/>
    <group name="header">
        <groupExpression><![CDATA[$F{DELIVERY_NO}]]></groupExpression>
        <groupHeader>
            <band height="25">
                <textField>
                    <reportElement x="30" y="5" width="50" height="15" uuid="a5510f39-69db-440b-a3e2-86587259355a"/>
                    <textElement>
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[new SimpleDateFormat("dd/MM/yyyy").format($F{DELIVERY_DATE})]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="364" y="5" width="152" height="15" uuid="17d0fa46-8e7e-4acb-af5e-5a4a8ac27f27"/>
                    <textElement>
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{REMARK}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="516" y="5" width="38" height="15" uuid="04b24b60-47b4-4f4b-b749-aa569a92aa04"/>
                    <textElement textAlignment="Center">
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{STATUS}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="79" y="5" width="71" height="15" uuid="ceeeed45-944d-45c6-831d-2d8bc6e35f52"/>
                    <textElement textAlignment="Center">
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{DELIVERY_NO}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="149" y="5" width="101" height="15" uuid="39f1c0df-c3ca-4468-89a3-a6597aa38b06"/>
                    <textElement textAlignment="Center">
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{REQUEST_NO}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="249" y="5" width="116" height="15" uuid="8ef523dc-4631-4e56-ab9c-1a5774cda5be"/>
                    <textElement>
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{DELIVERY_ORDER_KE}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="0" y="5" width="31" height="15" uuid="04b321df-67a5-4f97-97d2-f6ff4a8bcbb6"/>
                    <textElement textAlignment="Center">
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{NUM} + " ."]]></textFieldExpression>
                </textField>
            </band>
        </groupHeader>
    </group>
    <group name="detail" isReprintHeaderOnEachPage="true">
        <groupExpression><![CDATA[$F{DELIVERY_NO}]]></groupExpression>
        <groupHeader>
            <band height="18">
                <printWhenExpression><![CDATA[$P{detail}.equals(1)]]></printWhenExpression>
                <line>
                    <reportElement x="94" y="2" width="460" height="1" uuid="22a0ad4b-fdc0-4489-be97-cdb5406ae348"/>
                </line>
                <line>
                    <reportElement x="94" y="15" width="460" height="1" uuid="7d5d22b1-39e6-448a-8466-e3a1d7dc8489"/>
                </line>
                <staticText>
                    <reportElement x="94" y="2" width="50" height="15" uuid="ae47e08c-42c8-4d0e-bc58-2f74e66cc73b"/>
                    <textElement textAlignment="Center">
                        <font size="8" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Kode]]></text>
                </staticText>
                <staticText>
                    <reportElement x="143" y="2" width="179" height="15" uuid="0e33d753-d608-4a29-bc60-f07dd8b06bc1"/>
                    <textElement>
                        <font size="8" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Nama Barang]]></text>
                </staticText>
                <staticText>
                    <reportElement x="321" y="2" width="78" height="15" uuid="863448be-c376-405b-9295-4f90ca905815"/>
                    <textElement textAlignment="Center">
                        <font size="8" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Qty Besar]]></text>
                </staticText>
                <staticText>
                    <reportElement x="398" y="2" width="78" height="15" uuid="9afde751-40ee-474b-a4ba-ff1e3cc1e9e7"/>
                    <textElement textAlignment="Center">
                        <font size="8" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Qty Kecil]]></text>
                </staticText>
                <staticText>
                    <reportElement x="475" y="2" width="78" height="15" uuid="4d425c4c-c3e4-4d34-89b4-55eb79e64cbf"/>
                    <textElement textAlignment="Center">
                        <font size="8" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Total Qty]]></text>
                </staticText>
            </band>
        </groupHeader>
    </group>
    <group name="itemDetail">
        <groupExpression><![CDATA[$F{DELIVERY_NO} + $F{ITEM_CODE}]]></groupExpression>
        <groupHeader>
            <band height="15">
                <printWhenExpression><![CDATA[$P{detail}.equals(1) && (!$F{ITEM_CODE}.equals(null))]]></printWhenExpression>
                <textField>
                    <reportElement x="94" y="0" width="50" height="15" uuid="f56f3c27-9a21-470b-bb5d-89872985f79e"/>
                    <textElement textAlignment="Center">
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{ITEM_CODE}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="143" y="0" width="179" height="15" uuid="2b8e7790-8ec5-4a81-88df-cc1568cc7db5"/>
                    <textElement>
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{ITEM_DESCRIPTION}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="321" y="0" width="78" height="15" uuid="89ec6c1a-55ec-4c61-a93c-1904f3528541"/>
                    <textElement textAlignment="Center">
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[new DecimalFormat("#,##0.0000").format($F{QTY_PURCH}) + " " + $F{UOM_PURCH}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="398" y="0" width="78" height="15" uuid="bc7c13a5-f561-4d3b-8b62-9b6f0b6faf27"/>
                    <textElement textAlignment="Center">
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[new DecimalFormat("#,##0.0000").format($F{QTY_STOCK}) + " " + $F{UOM_STOCK}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="475" y="0" width="78" height="15" uuid="9c0c36d9-29a7-4778-ab38-9101e46a67d1"/>
                    <textElement textAlignment="Center">
                        <font size="8"/>
                    </textElement>
                    <textFieldExpression><![CDATA[new DecimalFormat("#,##0.0000").format($F{TOTAL_QTY}) + " " + $F{UOM_TOTAL}]]></textFieldExpression>
                </textField>
            </band>
        </groupHeader>
    </group>
    <background>
        <band splitType="Stretch"/>
    </background>
    <columnHeader>
        <band height="98" splitType="Stretch">
            <image>
                <reportElement x="22" y="1" width="56" height="42" isPrintWhenDetailOverflows="true" uuid="e97813fe-6bdd-4579-8fc4-915ca01dc9f1"/>
                <imageExpression><![CDATA["logo/logoKfc.png"]]></imageExpression>
            </image>
            <staticText>
                <reportElement x="81" y="0" width="112" height="11" uuid="01f34372-348f-4fd9-b8ad-4573af9f8ec9"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <text><![CDATA[PT. Fastfood Indonesia, Tbk]]></text>
            </staticText>
            <textField>
                <reportElement x="81" y="10" width="122" height="11" uuid="abbc81ca-ac76-4c2d-a1d7-b16bce5f33fa"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{OUTLET_NAME} + "-" + $F{TYPE}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="81" y="20" width="122" height="11" uuid="944aade3-f718-4dee-826e-c97bb0132c53"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ADDRESS_1}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="81" y="30" width="122" height="11" uuid="4b6193bf-341a-491e-8b7a-4820dfaffb6c"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ADDRESS_2}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="172" y="37" width="221" height="18" uuid="ea455947-ace1-498b-b577-d4d4c599c247"/>
                <textElement textAlignment="Center">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[LAPORAN DELIVERY ORDER]]></text>
            </staticText>
            <staticText>
                <reportElement x="0" y="60" width="50" height="11" uuid="1fd47466-5b3f-47a4-a4de-93e2c65c45d3"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <text><![CDATA[Periode     : ]]></text>
            </staticText>
            <textField>
                <reportElement x="49" y="60" width="287" height="11" uuid="ceb8922b-cf0d-42a7-9c2b-ed64ad7cb7ac"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[new SimpleDateFormat("dd/MM/yyyy").format(new SimpleDateFormat("dd-MMM-yy").parse($P{fromDate}))
+ " s/d " + new SimpleDateFormat("dd/MM/yyyy").format(new SimpleDateFormat("dd-MMM-yy").parse($P{toDate}))]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="437" y="0" width="114" height="11" uuid="fbc60455-869e-469f-8d2e-6daadf1e7e4a"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA["Halaman : " + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="437" y="10" width="114" height="11" uuid="151278d0-c013-402f-8b12-9fb307dde65a"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA["User Cetak : " + $P{user}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="437" y="20" width="114" height="11" uuid="f2a5250d-945a-4ddc-badc-4c6bfa40ce73"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA["Tanggal Cetak : " + new SimpleDateFormat("dd/MM/yyyy").format(new Date())]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="437" y="30" width="114" height="11" uuid="59538c26-b8c7-43fa-ad2a-2b6ae8bcb442"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA["Jam Cetak : " + new SimpleDateFormat("hh:mm:ss").format(new Date())]]></textFieldExpression>
            </textField>
            <line>
                <reportElement x="1" y="82" width="552" height="1" uuid="acca77af-7fde-4636-a431-7c763e07e2fc"/>
            </line>
            <line>
                <reportElement x="1" y="97" width="552" height="1" uuid="bf86da33-f3e7-4902-adf9-3bf028fc428a"/>
            </line>
            <staticText>
                <reportElement mode="Transparent" x="516" y="83" width="38" height="15" uuid="db768710-72cf-413f-8f7d-93da6d977a0a"/>
                <textElement textAlignment="Center">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[Status]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Transparent" x="364" y="83" width="152" height="15" uuid="e1e69c01-9f78-457c-9639-f1e5149fa8a2"/>
                <textElement>
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[Catatan]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Transparent" x="0" y="83" width="31" height="15" uuid="6227b2d7-e38f-42e0-9ee1-7404f511cb9c"/>
                <textElement textAlignment="Center">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[No]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Transparent" x="30" y="83" width="50" height="15" uuid="ce7fa785-d473-4d03-8576-672d0a17b1c8"/>
                <textElement textAlignment="Center">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[Tanggal]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Transparent" x="149" y="83" width="101" height="15" uuid="34ab1602-7b76-489d-a10f-6090801bf16d"/>
                <textElement textAlignment="Center">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[No Permintaan]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Transparent" x="249" y="83" width="116" height="15" uuid="154f3bf7-7886-4f78-84c9-b7162e6b5c79"/>
                <textElement>
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[DO Ke]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Transparent" x="79" y="83" width="71" height="15" uuid="d8f1484c-186b-4585-82e6-5370fb310cf5"/>
                <textElement textAlignment="Center">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[No DO]]></text>
            </staticText>
        </band>
    </columnHeader>
    <pageFooter>
        <band height="15" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="18" splitType="Stretch"/>
    </summary>
</jasperReport>
