<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReportSummarySalesbyItemCode" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="6bb117e1-89a2-438b-9004-122ab48111d8">
    <property name="ireport.zoom" value="1.4641000000000022"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="outletCode" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="shift1" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="shift2" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="pos1" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="pos2" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="fromDate" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="toDate" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="fromTime" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="toTime" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="cashier1" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="cashier2" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="user" class="java.lang.String"/>
    <parameter name="outletName" class="java.lang.String"/>
    <parameter name="cashier" class="java.lang.String"/>
    <parameter name="pos" class="java.lang.String"/>
    <parameter name="shift" class="java.lang.String"/>
    <queryString>
        <![CDATA[SELECT END.*,END.EI+END.TA AS SUMETA FROM(
SELECT A.*,M.ITEM_DESCRIPTION,M.uom_stock FROM( SELECT   a.ITEM, SUM (a.TOTAL_EI) AS ei, SUM (a.TOTAL_TA) AS ta
       FROM   (  SELECT   c.item_code AS ITEM,
                          e.item_description,
                          c.menu_item_code AS Menu,
                          d.item_description AS keterangan,
                          c.ei,
                          c.resep_ei,
                          c.total_ei,
                          c.ta,
                          c.resep_ta,
                          c.total_ta,
                          c.uom_stock
                   FROM         (  SELECT   c.item_code,
                                            b.menu_item_code,
                                            EI,
                                            qty_stock_e AS resep_EI,
                                            (EI * qty_stock_e) AS Total_EI,
                                            TA,
                                            qty_stock_t AS resep_TA,
                                            (TA * qty_stock_t) AS total_TA,
                                            UOM_STOCK
                                     FROM      (  SELECT   a.menu_item_code,
                                                           SUM (a.EI) EI,
                                                           SUM (a.TA) TA
                                                    FROM   (  SELECT   a.menu_item_code,
                                                                       SUM (a.item_qty)
                                                                          ei,
                                                                       0 AS ta
                                                                FROM         t_pos_bill_item_detail a
                                                                          JOIN
                                                                             t_pos_bill b
                                                                          ON a.bill_no =
                                                                                b.bill_no
                                                                             AND a.trans_Date =
                                                                                   b.trans_date
                                                                             AND a.day_seq =
                                                                                   b.day_seq
                                                                             AND a.pos_code =
                                                                                   b.pos_code
                                                                             AND a.outlet_code =
                                                                                   b.outlet_code
                                                                             AND b.delivery_status =
                                                                                   'CLS'
                                                                       JOIN
                                                                          t_pos_bill_item c
                                                                       ON a.bill_no =
                                                                             c.bill_no
                                                                          AND a.trans_Date =
                                                                                c.trans_date
                                                                          AND a.day_seq =
                                                                                c.day_seq
                                                                          AND a.pos_code =
                                                                                c.pos_code
                                                                          AND a.outlet_code =
                                                                                c.outlet_code
                                                                          AND a.item_seq =
                                                                                c.item_seq
                                                                          AND CASE
                                                                                WHEN NVL (
                                                                                        c.trans_type,
                                                                                        'TA'
                                                                                     ) <>
                                                                                        'EI'
                                                                                THEN
                                                                                   'TA'
                                                                                ELSE
                                                                                   'EI'
                                                                             END = 'EI'
                                                               WHERE   a.outlet_code =
                                                                         $P{outletCode}
                                                                       AND a.trans_date BETWEEN $P{fromDate}
                                                                                            AND  $P{toDate}
                                                                       AND b.pos_code BETWEEN $P{pos1}
                                                                                          AND  $P{pos2}
                                                                       AND b.shift_code BETWEEN $P{shift1}
                                                                                            AND  $P{shift2}
                                                                       AND b.cashier_code BETWEEN $P{cashier1}
                                                                                              AND $P{cashier2}
                                                                       AND b.BILL_time BETWEEN $P{fromTime}
                                                                                           AND  $P{toTime}
                                                                       AND b.delivery_status =
                                                                             'CLS'
                                                            GROUP BY   A.MENU_ITEM_CODE
                                                            UNION ALL
                                                              SELECT   a.menu_item_code,
                                                                       0 AS ei,
                                                                       SUM (a.item_qty)
                                                                          AS ta
                                                                FROM         t_pos_bill_item_detail a
                                                                          JOIN
                                                                             t_pos_bill b
                                                                          ON a.bill_no =
                                                                                b.bill_no
                                                                             AND a.trans_Date =
                                                                                   b.trans_date
                                                                             AND a.day_seq =
                                                                                   b.day_seq
                                                                             AND a.pos_code =
                                                                                   b.pos_code
                                                                             AND a.outlet_code =
                                                                                   b.outlet_code
                                                                             AND b.delivery_status =
                                                                                   'CLS'
                                                                       JOIN
                                                                          t_pos_bill_item c
                                                                       ON a.bill_no =
                                                                             c.bill_no
                                                                          AND a.trans_Date =
                                                                                c.trans_date
                                                                          AND a.day_seq =
                                                                                c.day_seq
                                                                          AND a.pos_code =
                                                                                c.pos_code
                                                                          AND a.outlet_code =
                                                                                c.outlet_code
                                                                          AND a.item_seq =
                                                                                c.item_seq
                                                                          AND CASE
                                                                                WHEN NVL (
                                                                                        c.trans_type,
                                                                                        'TA'
                                                                                     ) <>
                                                                                        'EI'
                                                                                THEN
                                                                                   'TA'
                                                                                ELSE
                                                                                   'EI'
                                                                             END <>
                                                                                'EI'
                                                               WHERE   a.outlet_code =
                                                                         $P{outletCode}
                                                                       AND a.trans_date BETWEEN $P{fromDate}
                                                                                            AND  $P{toDate}
                                                                       AND b.pos_code BETWEEN $P{pos1}
                                                                                          AND  $P{pos2}
                                                                       AND b.shift_code BETWEEN $P{shift1}
                                                                                            AND  $P{shift2}
                                                                       AND b.cashier_code BETWEEN $P{cashier1}
                                                                                              AND $P{cashier2}
                                                                       AND b.BILL_time BETWEEN $P{fromTime}
                                                                                           AND  $P{toTime}
                                                                       AND b.delivery_status =
                                                                             'CLS'
                                                            GROUP BY   A.MENU_ITEM_CODE
                                                            UNION ALL
                                                              SELECT   a.menu_item_code,
                                                                       SUM (a.item_qty)
                                                                          ei,
                                                                       0 AS ta
                                                                FROM         t_pos_bill_item a
                                                                          JOIN
                                                                             t_pos_bill b
                                                                          ON a.trans_date =
                                                                                b.trans_date
                                                                             AND a.pos_code =
                                                                                   b.pos_code
                                                                             AND a.outlet_code =
                                                                                   b.outlet_code
                                                                             AND a.day_seq =
                                                                                   b.day_seq
                                                                             AND a.bill_no =
                                                                                   b.bill_no
                                                                             AND b.delivery_status =
                                                                                   'CLS'
                                                                             AND CASE
                                                                                   WHEN NVL (
                                                                                           A.trans_type,
                                                                                           'TA'
                                                                                        ) <>
                                                                                           'EI'
                                                                                   THEN
                                                                                      'TA'
                                                                                   ELSE
                                                                                      'EI'
                                                                                END =
                                                                                   'EI'
                                                                       JOIN
                                                                          m_menu_item c
                                                                       ON a.menu_item_code =
                                                                             c.menu_item_code
                                                                          AND c.menu_set =
                                                                                'Y'
                                                               WHERE   a.trans_date BETWEEN '26/July/2023'
                                                                                        AND  '26/July/2023'
                                                                       AND a.outlet_code =
                                                                             '0208'
                                                            GROUP BY   A.MENU_ITEM_CODE
                                                            UNION ALL
                                                              SELECT   a.menu_item_code,
                                                                       0 AS ei,
                                                                       SUM (a.item_qty)
                                                                          AS ta
                                                                FROM         t_pos_bill_item a
                                                                          JOIN
                                                                             t_pos_bill b
                                                                          ON a.trans_date =
                                                                                b.trans_date
                                                                             AND a.pos_code =
                                                                                   b.pos_code
                                                                             AND a.outlet_code =
                                                                                   b.outlet_code
                                                                             AND a.day_seq =
                                                                                   b.day_seq
                                                                             AND a.bill_no =
                                                                                   b.bill_no
                                                                             AND b.delivery_status =
                                                                                   'CLS'
                                                                             AND CASE
                                                                                   WHEN NVL (
                                                                                           A.trans_type,
                                                                                           'TA'
                                                                                        ) <>
                                                                                           'EI'
                                                                                   THEN
                                                                                      'TA'
                                                                                   ELSE
                                                                                      'EI'
                                                                                END <>
                                                                                   'EI'
                                                                       JOIN
                                                                          m_menu_item c
                                                                       ON a.menu_item_code =
                                                                             c.menu_item_code
                                                                          AND c.menu_set =
                                                                                'Y'
                                                               WHERE   a.outlet_code =
                                                                         $P{outletCode}
                                                                       AND a.trans_date BETWEEN $P{fromDate}
                                                                                            AND  $P{toDate}
                                                                       AND b.pos_code BETWEEN $P{pos1}
                                                                                          AND  $P{pos2}
                                                                       AND b.shift_code BETWEEN $P{shift1}
                                                                                            AND  $P{shift2}
                                                                       AND b.cashier_code BETWEEN $P{cashier1}
                                                                                              AND $P{cashier2}
                                                                       AND b.BILL_time BETWEEN $P{fromTime}
                                                                                           AND  $P{toTime}
                                                                       AND b.delivery_status =
                                                                             'CLS'
                                                            GROUP BY   A.MENU_ITEM_CODE)
                                                           a
                                                GROUP BY   a.menu_item_code) b
                                            LEFT JOIN
                                               m_group_item c
                                            ON b.menu_item_code = c.group_item_code
                                    WHERE   c.status = 'A'
                                 GROUP BY   b.menu_item_code,
                                            EI,
                                            TA,
                                            qty_stock_e,
                                            qty_stock_t,
                                            UOM_STOCK,
                                            c.item_code) C
                             LEFT JOIN
                                m_item d
                             ON d.item_code = c.menu_item_code
                          LEFT JOIN
                             m_item e
                          ON e.item_code = c.item_code
               GROUP BY   c.item_code,
                          e.item_description,
                          c.menu_item_code,
                          d.item_description,
                          c.ei,
                          c.resep_ei,
                          c.total_ei,
                          c.ta,
                          c.resep_ta,
                          c.total_ta,
                          c.uom_stock) a
   GROUP BY   a.item)A LEFT JOIN
   M_ITEM M
   ON A.ITEM=M.ITEM_CODE )END ORDER BY ITEM ASC]]>
    </queryString>
    <field name="ITEM" class="java.lang.String"/>
    <field name="EI" class="java.math.BigDecimal"/>
    <field name="TA" class="java.math.BigDecimal"/>
    <field name="ITEM_DESCRIPTION" class="java.lang.String"/>
    <field name="UOM_STOCK" class="java.lang.String"/>
    <field name="SUMETA" class="java.math.BigDecimal"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <pageHeader>
        <band height="90" splitType="Stretch">
            <textField>
                <reportElement x="65" y="11" width="141" height="11" uuid="4c9593ab-6123-447b-be10-cad7a6942c84"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{outletName}]]></textFieldExpression>
            </textField>
            <image>
                <reportElement x="8" y="1" width="56" height="42" isPrintWhenDetailOverflows="true" uuid="fb7cc021-f962-48ad-99d1-88ba4069c9dc"/>
                <imageExpression><![CDATA["logo/logoKfc.png"]]></imageExpression>
            </image>
            <staticText>
                <reportElement x="65" y="1" width="112" height="11" uuid="4c769eb6-8ce5-4c4f-81a0-a3598f050cc7"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <text><![CDATA[PT. Fastfood Indonesia, Tbk]]></text>
            </staticText>
            <textField>
                <reportElement x="57" y="55" width="283" height="11" uuid="40323b70-d8d7-4819-860f-3d77bb8dd8a6"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[" : " + new SimpleDateFormat("dd/MM/yyyy").format(new SimpleDateFormat("dd-MMM-yy").parse($P{fromDate})) + " s/d " + new SimpleDateFormat("dd/MM/yyyy").format(new SimpleDateFormat("dd-MMM-yy").parse($P{toDate}))]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="352" y="55" width="55" height="11" uuid="72ae1c51-d8a9-44f3-9e67-7a490ee23ec2"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <text><![CDATA[Tanggal Cetak ]]></text>
            </staticText>
            <textField>
                <reportElement x="406" y="75" width="150" height="11" uuid="c3effa57-7985-47df-939e-3b77a221f239"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[" : " + $P{shift}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="3" y="55" width="55" height="11" uuid="d1baadfd-93b7-4b0c-8a63-80fa19cd6b18"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <text><![CDATA[Periode       ]]></text>
            </staticText>
            <textField>
                <reportElement x="57" y="65" width="283" height="11" uuid="ccc7391d-debd-41f3-92b9-c94700b1e723"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[" : " + $P{cashier}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="3" y="65" width="55" height="11" uuid="9b464bc4-1265-449d-8dc2-a65b66fc5779"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <text><![CDATA[Cashier        ]]></text>
            </staticText>
            <staticText>
                <reportElement x="351" y="3" width="188" height="20" uuid="aaccf8d5-aaaf-4ff4-964e-892bf85ff238"/>
                <textElement textAlignment="Center">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[SALES BY ITEM CODE]]></text>
            </staticText>
            <staticText>
                <reportElement x="352" y="65" width="55" height="11" uuid="541381f2-7d48-4972-81a8-f5e9e84db369"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <text><![CDATA[User ]]></text>
            </staticText>
            <textField>
                <reportElement x="406" y="55" width="150" height="11" uuid="e65810f0-3e95-4e8e-87c4-5a1e79db2adf"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[" : " + new SimpleDateFormat("dd/MM/yyyy hh:mm:ss").format(new Date())]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="3" y="75" width="55" height="11" uuid="96a6de03-797c-4764-8f1e-eb1efad4c2a9"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <text><![CDATA[Pos]]></text>
            </staticText>
            <staticText>
                <reportElement x="352" y="75" width="55" height="11" uuid="31c121f6-834d-46b1-b29e-93711bdd98e4"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <text><![CDATA[Shift]]></text>
            </staticText>
            <textField>
                <reportElement x="406" y="65" width="150" height="11" uuid="74631453-560f-484b-b393-a9e9073128aa"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[" : " + $P{user}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="57" y="75" width="283" height="11" uuid="06098c5e-483c-46d3-bc7e-22f8fe5425bc"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[" : "  +  $P{pos}]]></textFieldExpression>
            </textField>
        </band>
    </pageHeader>
    <columnHeader>
        <band height="26" splitType="Stretch">
            <staticText>
                <reportElement x="7" y="3" width="61" height="20" uuid="f10881a4-ecf2-4a5d-b861-1a6c9a198654"/>
                <text><![CDATA[KODE]]></text>
            </staticText>
            <staticText>
                <reportElement x="68" y="3" width="143" height="20" uuid="777062b8-e390-40d4-a82b-c1d88827ab40"/>
                <text><![CDATA[ITEM DESCRIPTION]]></text>
            </staticText>
            <staticText>
                <reportElement x="355" y="3" width="63" height="20" uuid="0e040eb9-6abe-4945-be92-875ddc9c129e"/>
                <textElement textAlignment="Center"/>
                <text><![CDATA[EI]]></text>
            </staticText>
            <staticText>
                <reportElement x="418" y="3" width="63" height="20" uuid="76a0cdbf-4b70-4fa5-b3e0-4c93bfa34495"/>
                <textElement textAlignment="Center"/>
                <text><![CDATA[TA]]></text>
            </staticText>
            <staticText>
                <reportElement x="487" y="3" width="68" height="20" uuid="2cf4904f-0076-4e80-abf7-06bc6d40d5d7"/>
                <text><![CDATA[SUMETA]]></text>
            </staticText>
            <staticText>
                <reportElement x="278" y="3" width="77" height="20" uuid="e88b3cbf-7e7b-464f-9268-4457ba3b0237"/>
                <text><![CDATA[UOM_STOCK]]></text>
            </staticText>
            <line>
                <reportElement x="1" y="2" width="553" height="1" uuid="e3cf50b5-9b8a-4739-9460-fd531ca19eb0"/>
            </line>
            <line>
                <reportElement x="1" y="23" width="553" height="1" uuid="dbc0fd4c-ebf9-4abe-bf44-3334c2048baa"/>
            </line>
        </band>
    </columnHeader>
    <detail>
        <band height="21" splitType="Stretch">
            <textField>
                <reportElement x="7" y="1" width="61" height="20" uuid="cedafe5b-46cc-4c51-8786-1b47276c40df"/>
                <textFieldExpression><![CDATA[$F{ITEM}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="68" y="1" width="203" height="20" uuid="0faf240c-d474-44e7-bebe-455d701c4fd8"/>
                <textFieldExpression><![CDATA[$F{ITEM_DESCRIPTION}]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00">
                <reportElement x="355" y="1" width="63" height="20" uuid="ca1d739e-4189-41e4-a388-91ce3d19078d"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression><![CDATA[$F{EI}]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00">
                <reportElement x="418" y="1" width="63" height="20" uuid="ca0576ce-c52a-486a-8185-2dde75bcaac1"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression><![CDATA[$F{TA}]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00">
                <reportElement x="487" y="1" width="68" height="20" uuid="3c936c29-4c4b-495a-b761-b1ae5c35854c"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA[$F{SUMETA}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="278" y="1" width="77" height="20" uuid="c9cb216b-e86d-4599-a7b6-d088015166ae"/>
                <textFieldExpression><![CDATA[$F{UOM_STOCK}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport>
